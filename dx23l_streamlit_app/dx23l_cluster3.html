<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.17.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"mark": {"type": "circle", "opacity": 0.2, "size": 1000}, "encoding": {"color": {"field": "claim_type", "type": "nominal"}, "tooltip": [{"field": "cluster3_prev%", "type": "quantitative"}, {"field": "event_name", "type": "nominal"}], "x": {"field": "cluster3_days", "type": "nominal"}, "y": {"field": "event_name", "type": "nominal"}}, "height": 500, "width": 700}, {"mark": {"type": "text", "color": "black", "dx": 1, "fontSize": 15}, "encoding": {"color": {"field": "claim_type", "type": "nominal"}, "text": {"field": "cluster3_prev%", "type": "quantitative"}, "tooltip": [{"field": "cluster3_prev%", "type": "quantitative"}, {"field": "event_name", "type": "nominal"}], "x": {"field": "cluster3_days", "type": "nominal"}, "y": {"field": "event_name", "type": "nominal"}}, "height": 500, "width": 700}, {"mark": {"type": "text", "align": "left", "dx": -20, "dy": -20}, "encoding": {"color": {"field": "claim_type", "type": "nominal"}, "text": {"field": "event_name", "type": "nominal"}, "tooltip": [{"field": "cluster3_prev%", "type": "quantitative"}, {"field": "event_name", "type": "nominal"}], "x": {"field": "cluster3_days", "type": "nominal"}, "y": {"field": "event_name", "type": "nominal"}}, "height": 500, "width": 700}], "data": {"name": "data-6a22dad36efd828d16b9699798f9b881"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-6a22dad36efd828d16b9699798f9b881": [{"claim_type": "DX", "event_name": "Dx Cardiac Disorders", "cluster3_days": "52", "cluster3_prev": 310, "total_patients": 1253, "cluster3_prev%": 24.7}, {"claim_type": "DX", "event_name": "Dx Diabetes", "cluster3_days": "58", "cluster3_prev": 331, "total_patients": 1253, "cluster3_prev%": 26.4}, {"claim_type": "DX", "event_name": "Dx Difficulty In Breathing", "cluster3_days": "33", "cluster3_prev": 398, "total_patients": 1253, "cluster3_prev%": 31.8}, {"claim_type": "DX", "event_name": "Dx Essential Hypertension", "cluster3_days": "52", "cluster3_prev": 563, "total_patients": 1253, "cluster3_prev%": 44.9}, {"claim_type": "DX", "event_name": "Dx Myasthenia Gravis With Acute Exacerbation", "cluster3_days": "56", "cluster3_prev": 477, "total_patients": 1253, "cluster3_prev%": 38.1}, {"claim_type": "DX", "event_name": "Dx Myasthenia Gravis Without Acute Exacerbation", "cluster3_days": "62", "cluster3_prev": 893, "total_patients": 1253, "cluster3_prev%": 71.3}, {"claim_type": "DX", "event_name": "Dx Other Connective Tissue Disease", "cluster3_days": "59", "cluster3_prev": 475, "total_patients": 1253, "cluster3_prev%": 37.9}, {"claim_type": "DX", "event_name": "Dx Other Nervous System Disorders", "cluster3_days": "36", "cluster3_prev": 800, "total_patients": 1253, "cluster3_prev%": 63.8}, {"claim_type": "DX", "event_name": "Dx Other Nutritional Endocrine And Metabolic Disorders", "cluster3_days": "48", "cluster3_prev": 379, "total_patients": 1253, "cluster3_prev%": 30.2}, {"claim_type": "DX", "event_name": "Dx Respiratory Disorders", "cluster3_days": "43", "cluster3_prev": 504, "total_patients": 1253, "cluster3_prev%": 40.2}, {"claim_type": "PX", "event_name": "Px Other Therapeutic Procedures", "cluster3_days": "64", "cluster3_prev": 705, "total_patients": 1253, "cluster3_prev%": 56.3}, {"claim_type": "PX", "event_name": "Px Other Laboratory", "cluster3_days": "65", "cluster3_prev": 749, "total_patients": 1253, "cluster3_prev%": 59.8}, {"claim_type": "PX", "event_name": "Px Imaging Test", "cluster3_days": "49", "cluster3_prev": 801, "total_patients": 1253, "cluster3_prev%": 63.9}, {"claim_type": "PX", "event_name": "Px Er Visit", "cluster3_days": "58", "cluster3_prev": 441, "total_patients": 1253, "cluster3_prev%": 35.2}, {"claim_type": "PX", "event_name": "Px Laboratory Chemistry And Hematology", "cluster3_days": "58", "cluster3_prev": 901, "total_patients": 1253, "cluster3_prev%": 71.9}, {"claim_type": "RX", "event_name": "Rx Proton Pump Inhibitors", "cluster3_days": "88", "cluster3_prev": 450, "total_patients": 1253, "cluster3_prev%": 35.9}, {"claim_type": "RX", "event_name": "Rx Ache", "cluster3_days": "93", "cluster3_prev": 1114, "total_patients": 1253, "cluster3_prev%": 88.9}, {"claim_type": "RX", "event_name": "Rx Codeine And Combinations Non Injectable", "cluster3_days": "91", "cluster3_prev": 461, "total_patients": 1253, "cluster3_prev%": 36.8}, {"claim_type": "RX", "event_name": "Rx Hmg Coa Reductase Inhibitors", "cluster3_days": "101", "cluster3_prev": 361, "total_patients": 1253, "cluster3_prev%": 28.8}, {"claim_type": "RX", "event_name": "Rx Immunosuppresive Transplant Agents", "cluster3_days": "98", "cluster3_prev": 588, "total_patients": 1253, "cluster3_prev%": 46.9}, {"claim_type": "RX", "event_name": "Rx Ivig", "cluster3_days": "75", "cluster3_prev": 431, "total_patients": 1253, "cluster3_prev%": 34.4}, {"claim_type": "RX", "event_name": "Rx Ivigscig", "cluster3_days": "73", "cluster3_prev": 471, "total_patients": 1253, "cluster3_prev%": 37.6}, {"claim_type": "RX", "event_name": "Rx Steroids", "cluster3_days": "86", "cluster3_prev": 800, "total_patients": 1253, "cluster3_prev%": 63.8}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>